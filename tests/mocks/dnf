#!/bin/bash
# Make sure the dnf.log directory exists
mkdir -p "$(dirname "$BATS_TEST_TMPDIR/dnf.log")"

# Log all dnf commands - ensure the file is created even if empty
touch "$BATS_TEST_TMPDIR/dnf.log"
echo "$@" >>"$BATS_TEST_TMPDIR/dnf.log"

# Simulate package installation
if [[ "$1" == "install" ]]; then
  # Skip options that start with - to avoid creating files like -y
  for arg in "$@"; do
    if [[ "$arg" != -* && "$arg" != "install" ]]; then
      # Only create fake installed package files for actual package names
      touch "${MOCK_ROOT}/usr/bin/$(basename "$arg")"
    fi
  done
fi
